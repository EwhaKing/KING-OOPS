# 03장 타입과 추상화

## 추상화

추상화의 본질은 불필요한 정보를 생략하고 핵심적인 정보만 취해 복잡함을 줄이는 것이다.

1. 구체적인 사물들 간 공통점을 취하고 차이점은 버림으로 일반화한다.
2. 중요한 부분의 강조를 위해 불필요한 세부사항을 제거한다.

## 객체

명확한 경계를 갖고 있어 식별이 가능한 존재를 객체라고 한다.</br>
이상한 나라의 트럼프들은 모두 트럼프지만 정원사 트럼프, 하트여왕 트럼프, 왕 트럼프, 등 다양한 객체로 분류하여 볼 수 있다. </br>
하지만 이들을 모두 추상화해, 트럼프로 볼 수 있다.

## 개념

편의상 개념 그룹이 클래스&인터페이스와 유사하다고 생각한다.

객체란, 특정한 개념을 적용할 수 있는 구체적인 사물이다.
개념이 객체에 적용되었을 때, 객체를 개념의 인스턴스라고 한다.

### 개념의 구성요소

* 심볼 - 개념의 이름 - 트럼프
* 내연 - 개념의 의미 - 납작 엎드릴 수 있고 뒤집어질 수 있다
* 외연 - 개념에 속하는 객체들 - 정원사, 하트여왕, 왕

## 분류

분류란, 객체에 맞는 개념을 적용하는 작업이다. </br>
어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정한다.

분류는 추상화를 위한 도구다. </br>
개념은 객체들의 복잡성을 낮추기 위한 추상화 도구다.

우리는 정원사, 하트여왕, 왕을 트럼프라는 개념으로 분류했다.

1. 구체적인 객체들 간 공통점을 취하고 차이점을 버려 트럼프라는 개념으로 일반화했다.
2. 중요하다고 생각한 부분(납작 엎드릴 수 있고 뒤집어질 수 있다)을 강조하기 위해 불필요한 세부사항(정원사, 하트여왕, 왕)을 제거했다.

## 타입

타입은 개념이다.

데이터 타입은
1. 데이터가 어떻게 사용되는지를 정의한다.
2. 메모리에 데이터가 어떻게 적재되는지를 감춘다.

객체지향에서의 타입은
1. 객체가 어떤 행동을 수행하는지를 정의한다.
2. 내부는 외부에 공개하지 않는다.

따라서 동일한 행동을 하는 객체는 동일한 타입이다. 내부가 어떻게 생겼는지, 데이터를 어떻게 처리하는지는 중요하지 않다. </br>
동일한 행동 = 동일한 책임 = 동일한 메시지 수신 가능 </br>
즉, 이는 곧 `다형성`을 말한다.

데이터가 내부에서 어떻게 돌아가는지와 무관하게 행동만이 고려 대상인 것은 곧 `캡슐화`를 말한다.

훌륭한 객체지향 설계는 `캡슐화`가 잘 된 설계이다.

데이터 -> 책임 순으로 진행되는 설계를 데이터 주도 설계, 책임 -> 데이터 순으로 진행되는 설계를 책임 주도 설계라고 한다. </br>
데이터 주도 설계 시 설계가 유연하지 못하게 되어 나온 대안이 책임 주도 설계이다.

객체를 결정하는 것은 행동이며, 데이터는 단지 행동을 따를 뿐이다.

앞서 말했던 `가변적`과 `불변적`은 타입과 연관이 있다.
타입의 값이 변하더라도 타입 자체는 정적이고, 변하지 않는다. 그래서 타입은 객체를 독립적이고 정적이게 만들어준다.
따라서 타입은 추상화다.

타입의 값이 중요할 때도 있지만, 그렇지 않을 때도 있다.
가령, 앨리스의 키가 100cm 이하일 때만 지나갈 수 있는 문이 있다면, 이때는 값이 중요해진다.
하지만 앨리스의 키를 변화시키는 물약을 마실 때 앨리스의 키가 몇인지는 관심사가 아니다.

## 특수화와 상속

사실 정원사와 하트여왕은 트럼프가 아닌 트럼프 인간이다.

납작 엎드릴 수 있고 뒤집어질 수 있다는 건 트럼프의 특징이다.
트럼프 인간은 걸을 때마다 몸이 종이처럼 펄럭인다는 내연을 가진 개념이다.

트럼프 인간은 물론 트럼프다. 납작 엎드릴 수 있도 뒤집어질 수 있기 때문이다.
그럼에도, `특수하게` 걸을 때마다 몸이 종이처럼 펄럭인다는 행동을 할 수 있다.
이를 특수화라고 한다. (특수화 <-> 일반화)

슈퍼타입 - 트럼프
서브타입 - 트럼프 인간

일반적으로 서브타입은 슈퍼타입의 행동과 호환되어야 하고, 대체할 수 있어야 한다.
즉, `상속`이다.

## 그래서...

객체를 분류하는 기준은 타입이고, 타입을 나누는 기준은 객체의 행동이다.
클래스는 타입을 구현하는 방법 중 하나이다.
